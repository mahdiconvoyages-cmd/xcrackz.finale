# üéØ Plan de Refonte - Gestion d'√âquipe & Missions

## üìã Objectifs

Cr√©er une page web moderne et intuitive pour :
1. ‚úÖ **Cr√©er** des missions facilement
2. ‚úÖ **G√©rer** les missions existantes
3. ‚úÖ **Assigner** des missions aux chauffeurs/contacts
4. ‚úÖ **D√©marrer** les inspections web directement
5. ‚úÖ **Suivre** l'√©tat des missions en temps r√©el

---

## üé® Architecture Propos√©e

### **Structure en Onglets Principaux**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üöó Missions  |  üë• √âquipe  |  üìã Assignations  |  üìä Stats ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### **Onglet 1 : Missions** üöó
- **Vue**: Liste/Grille des missions
- **Filtres**: Statut, Date, V√©hicule
- **Recherche**: Par r√©f√©rence, plaque, client
- **Actions rapides**:
  - ‚ûï Cr√©er nouvelle mission
  - üöÄ D√©marrer inspection
  - ‚úèÔ∏è Modifier
  - üë§ Assigner
  - üóëÔ∏è Supprimer
  - üìÑ Voir rapport

#### **Onglet 2 : √âquipe** üë•
- **Vue**: Liste des chauffeurs/contacts
- **Filtres**: R√¥le, Disponibilit√©
- **Informations**:
  - Nom, Email, T√©l√©phone
  - Missions assign√©es
  - Disponibilit√© calendrier
  - Performance
- **Actions**:
  - ‚ûï Ajouter contact
  - ‚úèÔ∏è Modifier
  - üìÖ Voir calendrier
  - üöó Voir missions assign√©es

#### **Onglet 3 : Assignations** üìã
- **Vue**: Tableau des assignations
- **Colonnes**:
  - Mission
  - Chauffeur
  - Montant HT
  - Commission
  - Statut
  - Date
- **Actions**:
  - ‚úÖ Valider
  - ‚ùå Annuler
  - üí∞ Modifier paiement

#### **Onglet 4 : Statistiques** üìä
- KPIs en temps r√©el
- Graphiques de performance
- Revenue tracking

---

## üöÄ Am√©liorations Cl√©s

### **1. Navigation Am√©lior√©e**
```tsx
// Syst√®me d'onglets fluide avec indicateur visuel
[Missions (24)] [√âquipe (12)] [Assignations (8)] [Stats]
     ‚ñ≤
   Active
```

### **2. Actions Contextuelles**
```tsx
// Bouton d'action principal selon l'√©tat
Mission "pending" ‚Üí [üöÄ D√©marrer Inspection]
Mission "in_progress" ‚Üí [üëÅÔ∏è Voir Inspection]
Mission "completed" ‚Üí [üìÑ Voir Rapport]
```

### **3. Vue Compacte/D√©taill√©e**
```tsx
// Toggle entre vue liste compacte et cartes d√©taill√©es
[‚ò∞ Liste] [‚äû Grille]
```

### **4. Workflow Simplifi√©**
```
Cr√©er Mission ‚Üí Assigner Chauffeur ‚Üí D√©marrer Inspection ‚Üí G√©n√©rer Rapport
     1Ô∏è‚É£              2Ô∏è‚É£                  3Ô∏è‚É£                   4Ô∏è‚É£
```

### **5. Inspection Web Int√©gr√©e**
```tsx
// Bouton visible sur chaque mission
[üöÄ D√©marrer Inspection]
  ‚Üì
  Ouvre InspectionViewer en modal fullscreen
  ‚Üì
  Capture photos + donn√©es
  ‚Üì
  G√©n√®re rapport automatique
```

---

## üéØ Interface Propos√©e

### **Header de Page**
```tsx
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üöó Gestion d'√âquipe & Missions                          ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ [üîç Rechercher...]  [üéØ Filtres]  [‚ûï Nouvelle Mission] ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **Zone de Contenu (Onglet Missions)**
```tsx
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üìä Statistiques Rapides                                 ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   ‚îÇ
‚îÇ ‚îÇ  24  ‚îÇ ‚îÇ   8  ‚îÇ ‚îÇ  12  ‚îÇ ‚îÇ   4  ‚îÇ                   ‚îÇ
‚îÇ ‚îÇTotal ‚îÇ ‚îÇAttente‚îÇ ‚îÇCours ‚îÇ ‚îÇTermin√©es‚îÇ                ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Mission #REF-001                          [En attente]  ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ üöó Peugeot 308 ‚Ä¢ AB-123-CD                              ‚îÇ
‚îÇ üìç Paris ‚Üí Lyon                                         ‚îÇ
‚îÇ üìÖ 14/10/2025                           1,200‚Ç¨          ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ [üöÄ D√©marrer] [üë§ Assigner] [‚úèÔ∏è Modifier] [üóëÔ∏è]       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **Modal d'Assignation**
```tsx
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üë§ Assigner Mission #REF-001                            ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ Chauffeur:     [S√©lectionner chauffeur ‚ñº]              ‚îÇ
‚îÇ Montant HT:    [1000]‚Ç¨                                  ‚îÇ
‚îÇ Commission:    [200]‚Ç¨                                   ‚îÇ
‚îÇ Notes:         [Optionnel...]                           ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ              [Annuler]  [‚úÖ Assigner]                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **Modal Inspection Web**
```tsx
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üöÄ Inspection Web - Mission #REF-001                    ‚îÇ
‚îÇ                                                    [‚úï]  ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ [COMPOSANT InspectionViewer FULLSCREEN]                 ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ ‚Ä¢ Capture photos (int√©rieur/ext√©rieur)                  ‚îÇ
‚îÇ ‚Ä¢ Saisie kilom√©trage                                    ‚îÇ
‚îÇ ‚Ä¢ √âtat du v√©hicule                                      ‚îÇ
‚îÇ ‚Ä¢ Notes                                                 ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ              [Annuler]  [‚úÖ Terminer]                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üí° Fonctionnalit√©s Avanc√©es

### **1. Quick Actions**
```tsx
// Raccourcis clavier
Ctrl + N ‚Üí Nouvelle mission
Ctrl + F ‚Üí Rechercher
Ctrl + I ‚Üí D√©marrer inspection
```

### **2. Bulk Actions**
```tsx
// S√©lectionner plusieurs missions
[‚òëÔ∏è] Mission 1
[‚òëÔ∏è] Mission 2
[‚òê] Mission 3

Actions en masse: [üë§ Assigner] [üóëÔ∏è Supprimer] [üìß Envoyer]
```

### **3. Vue Calendrier**
```tsx
// Planning visuel des missions
Lun  Mar  Mer  Jeu  Ven  Sam  Dim
 ‚Ä¢    ‚Ä¢‚Ä¢   ‚Ä¢    ‚Ä¢    ‚Ä¢‚Ä¢   -    -
```

### **4. Notifications Temps R√©el**
```tsx
// Toast notifications
‚úÖ Mission #REF-001 assign√©e √† Jean Dupont
üöÄ Inspection d√©marr√©e sur Mission #REF-002
üìÑ Rapport g√©n√©r√© pour Mission #REF-003
```

---

## üé® Design System

### **Palette de Couleurs**
```css
Primary: Teal/Cyan (actions principales)
Success: Green (missions termin√©es)
Warning: Amber (missions en attente)
Info: Blue (missions en cours)
Danger: Red (erreurs, suppressions)
```

### **Composants R√©utilisables**
- `MissionCard` - Carte mission
- `AssignmentModal` - Modal d'assignation
- `InspectionModal` - Modal inspection web
- `ContactCard` - Carte chauffeur
- `StatsCard` - Carte statistique
- `ActionButton` - Bouton d'action contextuel

---

## üì± Responsive Design

### **Desktop (>1024px)**
- 3 colonnes pour les cartes
- Sidebar avec filtres
- Modals centr√©s

### **Tablet (768-1024px)**
- 2 colonnes pour les cartes
- Filtres en dropdown
- Modals plein √©cran

### **Mobile (<768px)**
- 1 colonne
- Navigation en bas (bottom tabs)
- Swipe entre onglets
- Actions en floating button

---

## ‚úÖ Checklist d'Impl√©mentation

### Phase 1 : Structure de Base
- [ ] Cr√©er composant TabNavigation
- [ ] Structurer les 4 onglets
- [ ] Impl√©menter le routing interne

### Phase 2 : Onglet Missions
- [ ] Liste des missions avec filtres
- [ ] Bouton "D√©marrer Inspection"
- [ ] Actions rapides (Edit, Delete, Assign)
- [ ] Recherche et tri

### Phase 3 : Onglet √âquipe
- [ ] Liste des contacts/chauffeurs
- [ ] Indicateurs de disponibilit√©
- [ ] Gestion des contacts

### Phase 4 : Onglet Assignations
- [ ] Tableau des assignations
- [ ] Modal d'assignation
- [ ] Gestion paiements/commissions

### Phase 5 : Onglet Stats
- [ ] KPIs en temps r√©el
- [ ] Graphiques
- [ ] Export de donn√©es

### Phase 6 : Int√©gration Inspection
- [ ] Bouton "D√©marrer Inspection" fonctionnel
- [ ] Modal InspectionViewer fullscreen
- [ ] Sauvegarde automatique
- [ ] G√©n√©ration rapport

### Phase 7 : Polish & UX
- [ ] Animations
- [ ] Loading states
- [ ] Error handling
- [ ] Notifications toast
- [ ] Responsive design

---

## üéØ Exemple de Code - Nouvelle Structure

```tsx
// Structure simplifi√©e
<TeamMissionsPage>
  <Header>
    <Title>Gestion d'√âquipe & Missions</Title>
    <Actions>
      <SearchBar />
      <FilterButton />
      <CreateMissionButton />
    </Actions>
  </Header>

  <TabNavigation>
    <Tab active={activeTab === 'missions'}>Missions</Tab>
    <Tab active={activeTab === 'team'}>√âquipe</Tab>
    <Tab active={activeTab === 'assignments'}>Assignations</Tab>
    <Tab active={activeTab === 'stats'}>Stats</Tab>
  </TabNavigation>

  <TabContent>
    {activeTab === 'missions' && (
      <MissionsTab>
        <StatsOverview />
        <MissionsList>
          {missions.map(mission => (
            <MissionCard
              key={mission.id}
              mission={mission}
              onStartInspection={handleStartInspection}
              onAssign={handleAssign}
              onEdit={handleEdit}
              onDelete={handleDelete}
            />
          ))}
        </MissionsList>
      </MissionsTab>
    )}
    
    {activeTab === 'team' && <TeamTab />}
    {activeTab === 'assignments' && <AssignmentsTab />}
    {activeTab === 'stats' && <StatsTab />}
  </TabContent>

  {/* Modals */}
  <AssignmentModal />
  <InspectionModal />
  <EditMissionModal />
</TeamMissionsPage>
```

---

## üöÄ Prochaines √âtapes

1. **Validation** de l'architecture propos√©e
2. **Cr√©ation** des composants de base
3. **Int√©gration** avec Supabase
4. **Tests** et ajustements
5. **D√©ploiement**

---

**Pr√™t √† commencer l'impl√©mentation ?** üé®
